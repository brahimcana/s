<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>تسجيل الدخول / التسجيل – Coursier Prioritaire</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- خط عربي (اختياري) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- ملف JS العام -->
  <script src="scripts.js" defer></script>

  <style>
    body {
      font-family: 'Almarai', sans-serif;
      background-color: #f3f4f6;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-md bg-white shadow-2xl rounded-xl overflow-hidden">
    <!-- رأس الصفحة -->
    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-5 text-white">
      <h1 class="text-2xl font-bold text-center">Coursier Prioritaire</h1>
      <p class="text-sm text-center mt-1">سجل الدخول أو أنشئ حسابًا جديدًا</p>
    </div>

    <!-- حاوية الإشعارات -->
    <div id="alert-container" class="px-6 py-4"></div>

    <!-- تبويبات للتحكم بالنماذج -->
    <div class="px-6 py-6">
      <div class="flex justify-center mb-8 border-b">
        <button
          id="tab-login"
          class="flex-1 py-2 text-center text-lg font-semibold text-blue-700 border-b-2 border-blue-700 transition-colors"
        >
          تسجيل الدخول
        </button>
        <button
          id="tab-register"
          class="flex-1 py-2 text-center text-lg font-semibold text-gray-500 border-b-2 border-transparent hover:text-gray-700 transition-colors"
        >
          إنشاء حساب
        </button>
      </div>

      <!-- نموذج تسجيل الدخول -->
      <form id="login-form" class="space-y-5">
        <div>
          <label for="login-phone" class="block text-sm font-medium text-gray-700">رقم الهاتف</label>
          <input
            type="tel"
            id="login-phone"
            placeholder="06××××××××"
            required
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <button
          type="submit"
          id="btn-login-submit"
          class="w-full py-2 px-4 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-all disabled:opacity-50"
        >
          تسجيل الدخول
        </button>
      </form>

      <!-- نموذج إنشاء حساب -->
      <form id="register-form" class="hidden space-y-5">
        <div>
          <label for="reg-name" class="block text-sm font-medium text-gray-700">الاسم كاملًا</label>
          <input
            type="text"
            id="reg-name"
            placeholder="مثال: محمد علي"
            required
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"
          />
        </div>
        <div>
          <label for="reg-phone" class="block text-sm font-medium text-gray-700">رقم الهاتف</label>
          <input
            type="tel"
            id="reg-phone"
            placeholder="06××××××××"
            required
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"
          />
        </div>
        <div>
          <label for="reg-email" class="block text-sm font-medium text-gray-700">البريد الإلكتروني (اختياري)</label>
          <input
            type="email"
            id="reg-email"
            placeholder="name@example.com"
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"
          />
        </div>
        <div>
          <label for="reg-role" class="block text-sm font-medium text-gray-700">نوع الحساب</label>
          <select
            id="reg-role"
            required
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500"
          >
            <option value="client">عميل</option>
            <option value="courier">ساعي توصيل</option>
          </select>
        </div>
        <button
          type="submit"
          id="btn-register-submit"
          class="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition-all disabled:opacity-50"
        >
          إنشاء الحساب
        </button>
      </form>
    </div>
  </div>

  <p class="text-center text-gray-500 text-xs mt-6">
    &copy; 2025 Coursier Prioritaire Toulouse
  </p>

  <!-- سكربت داخلي للتحكم بظهور النماذج -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const tabLogin = document.getElementById("tab-login");
      const tabRegister = document.getElementById("tab-register");
      const formLogin = document.getElementById("login-form");
      const formRegister = document.getElementById("register-form");

      // افحص إن كان المستخدم محفوظًا بالفعل
      const user = getUserFromLocal();
      if (user) {
        if (user.role === "client") window.location.href = "client.html";
        else window.location.href = "courier.html";
      }

      // تبديل إلى تبويب تسجيل الدخول
      tabLogin.addEventListener("click", () => {
        tabLogin.classList.replace("text-gray-500", "text-blue-700");
        tabLogin.classList.replace("border-transparent", "border-blue-700");
        tabRegister.classList.replace("text-blue-700", "text-gray-500");
        tabRegister.classList.replace("border-blue-700", "border-transparent");
        formLogin.classList.remove("hidden");
        formRegister.classList.add("hidden");
      });

      // تبديل إلى تبويب إنشاء الحساب
      tabRegister.addEventListener("click", () => {
        tabRegister.classList.replace("text-gray-500", "text-blue-700");
        tabRegister.classList.replace("border-transparent", "border-blue-700");
        tabLogin.classList.replace("text-blue-700", "text-gray-500");
        tabLogin.classList.replace("border-blue-700", "border-transparent");
        formRegister.classList.remove("hidden");
        formLogin.classList.add("hidden");
      });
    });

    // ربط الأحداث مع الدوال في scripts.js
    document.getElementById("login-form").addEventListener("submit", handleLogin);
    document.getElementById("register-form").addEventListener("submit", handleRegister);
  </script>
</body>
</html>
